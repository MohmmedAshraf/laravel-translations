import{_ as B}from"./dialog.vue_vue_type_script_setup_true_lang-3254edea.js";import{_ as z}from"./base-button.vue_vue_type_script_setup_true_lang-193acd9e.js";import{_ as j}from"./alert.vue_vue_type_script_setup_true_lang-887d5df9.js";import{_ as E}from"./icon-publish-b2d2c7a1.js";import{o as l,j as u,g as e,d as T,a6 as O,r as x,e as c,u as t,b as s,w as d,t as a,c as h,a as g,f,G as L,F as N,K as A,O as S,a7 as V,Z as D}from"./app-4a4d2073.js";import"./transition-6f9813b8.js";import"./dialog-cfb46eba.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ExclamationCircleIcon-2d2033a0.js";import"./XCircleIcon-b3205d77.js";function I(y,v){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M8.75 2.75a.75.75 0 0 0-1.5 0v5.69L5.03 6.22a.75.75 0 0 0-1.06 1.06l3.5 3.5a.75.75 0 0 0 1.06 0l3.5-3.5a.75.75 0 0 0-1.06-1.06L8.75 8.44V2.75Z"}),e("path",{d:"M3.5 9.75a.75.75 0 0 0-1.5 0v1.5A2.75 2.75 0 0 0 4.75 14h6.5A2.75 2.75 0 0 0 14 11.25v-1.5a.75.75 0 0 0-1.5 0v1.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-1.5Z"})])}const M={key:0,class:"relative flex flex-col items-start justify-center gap-4 px-6 py-4"},R={class:"flex w-full items-start gap-4"},Z={class:"flex size-16 shrink-0"},$={class:"flex-1"},F={class:"text-xl font-semibold leading-6 text-gray-600"},U={class:"mt-1 text-sm text-gray-500"},W={class:"w-full text-center"},G={key:1,class:"relative flex flex-col items-start justify-center gap-4 px-6 py-4"},H=e("div",{class:"mx-auto flex size-12 shrink-0 items-center justify-center"},[e("span",{role:"img",class:"text-4xl"},"ðŸ¤”")],-1),K={class:"w-full text-center"},q={class:"text-xl font-semibold leading-6 text-gray-600"},J={class:"mt-4 text-sm text-gray-500"},it=T({__name:"publish-translations",props:{canPublish:{type:Boolean},isProductionEnv:{type:Boolean}},setup(y){const v=O(),{close:p}=A(),r=x(!1),i=x(!1),w=()=>{r.value=!0,S.post(route("ltu.translation.export"),{},{preserveScroll:!0,onSuccess:()=>{r.value=!1,p()}})},k=()=>{i.value=!0,fetch(route("ltu.translation.download")).then(async o=>{let b=await o.blob();i.value=!1;const n=document.createElement("a"),_=window.URL.createObjectURL(b);n.download="lang.zip",n.href=_,document.body.appendChild(n),n.click(),document.body.removeChild(n),i.value=!1,p()}).catch(o=>{v.error(s("Something went wrong, please try again."),{icon:!0,position:V.BOTTOM_CENTER})})};return(o,b)=>{const n=D,_=E,P=j,m=z,C=B;return l(),u(N,null,[c(n,{title:t(s)("Add Languages")},null,8,["title"]),c(C,{size:"lg"},{default:d(()=>[o.canPublish?(l(),u("div",M,[e("div",R,[e("div",Z,[c(_,{class:"size-16 text-blue-300"})]),e("div",$,[e("h3",F,a(t(s)("Publish Translations")),1),e("p",U,a(t(s)("Be cautious when publishing, as this action will update your project with all translations and changes made in the database, overwriting project files.")),1)])]),e("div",W,[o.isProductionEnv?f("",!0):(l(),h(P,{key:0,variant:"warning",class:"text-left"},{default:d(()=>[e("strong",null,a(t(s)("Warning"))+":",1),g(" "+a("This is a Production Environment. Publishing translations will causing issues with version control and other developers, Please use the download button below instead."),1)]),_:1})),o.isProductionEnv?f("",!0):(l(),h(m,{key:1,disabled:t(r)||t(i),"is-loading":t(i),variant:"dark",size:"lg",class:"mt-4","full-width":"",target:"_blank",onClick:k},{default:d(()=>[c(t(I),{class:"size-4"}),e("span",null,a(t(s)("Download")),1)]),_:1},8,["disabled","is-loading"]))])])):(l(),u("div",G,[H,e("div",K,[e("h3",q,a(t(s)("What are you trying to do?")),1),e("p",J,a(t(s)("Add languages to your project, then come back to publish translations when you're ready.")),1)])])),e("div",{class:L(["grid grid-cols-1 gap-6 border-t px-6 py-4",{"md:grid-cols-2":o.canPublish}])},[c(m,{variant:"secondary",type:"button",size:"lg",tabindex:"1",onClick:t(p)},{default:d(()=>[g(a(t(s)("Close")),1)]),_:1},8,["onClick"]),o.canPublish?(l(),h(m,{key:0,variant:"primary",type:"button",size:"lg",disabled:t(r)||t(i),"is-loading":t(r),onClick:w},{default:d(()=>[g(a(t(s)("Publish")),1)]),_:1},8,["disabled","is-loading"])):f("",!0)],2)]),_:1})],64)}}});export{it as default};
