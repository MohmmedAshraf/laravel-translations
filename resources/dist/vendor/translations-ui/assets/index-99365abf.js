import{Q as j,R as M,S as I,r as w,u as L,U as q,V as F,W as G,s as x,C as b,y as V,X as $}from"./app-8d2ddf0a.js";function T(t){return q()?(F(t),!0):!1}function g(t){return typeof t=="function"?t():L(t)}const A=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const B=Object.prototype.toString,D=t=>B.call(t)==="[object Object]",O=()=>{},K=N();function N(){var t,e;return A&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Q(t){let e;function a(){return e||(e=t()),e}return a.reset=async()=>{const i=e;e=void 0,i&&await i},a}function E(...t){if(t.length!==1)return j(...t);const e=t[0];return typeof e=="function"?M(I(()=>({get:e,set:O}))):w(e)}function X(t,e,a={}){const{immediate:i=!0}=a,l=w(!1);let s=null;function u(){s&&(clearTimeout(s),s=null)}function f(){l.value=!1,u()}function o(...r){u(),l.value=!0,s=setTimeout(()=>{l.value=!1,s=null,t(...r)},g(e))}return i&&(l.value=!0,A&&o()),T(f),{isPending:M(l),start:o,stop:f}}function z(t){var e;const a=g(t);return(e=a==null?void 0:a.$el)!=null?e:a}const W=A?window:void 0,k=A?window.navigator:void 0;function U(...t){let e,a,i,l;if(typeof t[0]=="string"||Array.isArray(t[0])?([a,i,l]=t,e=W):[e,a,i,l]=t,!e)return O;Array.isArray(a)||(a=[a]),Array.isArray(i)||(i=[i]);const s=[],u=()=>{s.forEach(c=>c()),s.length=0},f=(c,d,v,m)=>(c.addEventListener(d,v,m),()=>c.removeEventListener(d,v,m)),o=b(()=>[z(e),g(l)],([c,d])=>{if(u(),!c)return;const v=D(d)?{...d}:d;s.push(...a.flatMap(m=>i.map(h=>f(c,m,h,v))))},{immediate:!0,flush:"post"}),r=()=>{o(),u()};return T(r),r}function H(){const t=w(!1),e=$();return e&&V(()=>{t.value=!0},e),t}function P(t){const e=H();return x(()=>(e.value,!!t()))}function R(t,e={}){const{controls:a=!1,navigator:i=k}=e,l=P(()=>i&&"permissions"in i);let s;const u=typeof t=="string"?{name:t}:t,f=w(),o=()=>{s&&(f.value=s.state)},r=Q(async()=>{if(l.value){if(!s)try{s=await i.permissions.query(u),U(s,"change",o),o()}catch{f.value="prompt"}return s}});return r(),a?{state:f,isSupported:l,query:r}:f}function Y(t={}){const{navigator:e=k,read:a=!1,source:i,copiedDuring:l=1500,legacy:s=!1}=t,u=P(()=>e&&"clipboard"in e),f=R("clipboard-read"),o=R("clipboard-write"),r=x(()=>u.value||s),c=w(""),d=w(!1),v=X(()=>d.value=!1,l);function m(){u.value&&S(f.value)?e.clipboard.readText().then(n=>{c.value=n}):c.value=C()}r.value&&a&&U(["copy","cut"],m);async function h(n=g(i)){r.value&&n!=null&&(u.value&&S(o.value)?await e.clipboard.writeText(n):y(n),c.value=n,d.value=!0,v.start())}function y(n){const p=document.createElement("textarea");p.value=n??"",p.style.position="absolute",p.style.opacity="0",document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()}function C(){var n,p,_;return(_=(p=(n=document==null?void 0:document.getSelection)==null?void 0:n.call(document))==null?void 0:p.toString())!=null?_:""}function S(n){return n==="granted"||n==="prompt"}return{isSupported:r,text:c,copied:d,copy:h}}function Z(t,e={}){const{pitch:a=1,rate:i=1,volume:l=1,window:s=W}=e,u=s&&s.speechSynthesis,f=P(()=>u),o=w(!1),r=w("init"),c=E(t||""),d=E(e.lang||"en-US"),v=G(void 0),m=(n=!o.value)=>{o.value=n},h=n=>{n.lang=g(d),n.voice=g(e.voice)||null,n.pitch=g(a),n.rate=g(i),n.volume=l,n.onstart=()=>{o.value=!0,r.value="play"},n.onpause=()=>{o.value=!1,r.value="pause"},n.onresume=()=>{o.value=!0,r.value="play"},n.onend=()=>{o.value=!1,r.value="end"},n.onerror=p=>{v.value=p}},y=x(()=>{o.value=!1,r.value="init";const n=new SpeechSynthesisUtterance(c.value);return h(n),n}),C=()=>{u.cancel(),y&&u.speak(y.value)},S=()=>{u.cancel(),o.value=!1};return f.value&&(h(y.value),b(d,n=>{y.value&&!o.value&&(y.value.lang=n)}),e.voice&&b(e.voice,()=>{u.cancel()}),b(o,()=>{o.value?u.resume():u.pause()})),T(()=>{o.value=!1}),{isSupported:f,isPlaying:o,status:r,utterance:y,error:v,stop:S,toggle:m,speak:C}}export{Y as a,E as b,D as c,T as d,A as e,K as i,O as n,g as t,Z as u};
